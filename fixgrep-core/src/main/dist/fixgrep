#!/bin/bash

ADDITIONAL_PARAMS=""

if [ "$@" = "man" ]; then
    DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
    less -R $DIR/man.txt
    exit 0
fi

if ! [[ $(java -version 2>&1 | egrep '(1.8|1.9|1.10)') ]]; then
    echo "Could not find appropriate java version installed.  Please ensure that java >= 1.8 is installed and on your path.  Results of java version check $(java -version)"
fi

if ! [ -t 0 ]; then
    ADDITIONAL_PARAMS="--piped"
fi

java -XX:+UseSerialGC -cp "lib/*" org.tools4j.fixgrep.FixGrepMain "$ADDITIONAL_PARAMS" "$@" <&0
